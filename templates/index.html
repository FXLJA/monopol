{% extends "base.html" %} {% block title %} | Check In {% endblock %} {% block
body %}
<div class="d-flex flex-column align-items-center">
  <div
    class="d-flex flex-column align-items-center w-100"
    style="max-width: 512px"
  >
    <form
      class="mt-4 w-100"
      action="{{ url_for('index') }}"
      method="POST"
      enctype="multipart/form-data"
    >
      <div class="mb-2">
        <label class="form-label fw-semibold h5 mb-3" for="license-photo">
          Upload License Plate
        </label>
        <input
          onchange="readImage(this)"
          type="file"
          class="form-control"
          id="license-photo"
          name="license-photo"
          required
        />
      </div>
      <div class="my-2 w-100">
        <img id="license-plate" class="w-100" />
      </div>
      <div class="mb-2 mt-2 w-100">
        <button class="btn btn-dark w-100 fw-semibold rounded-lg" type="submit">
          Process
        </button>
      </div>
    </form>
    <div class="mt-4 w-100">
      {% if raw_image is not none %}
      <h5 class="fw-semibold h5">Uploaded License Plate</h5>
      <div class="my-2 w-100">
        <img
          id="extracted-plate-characters"
          src="data:image/jpeg;base64,{{ raw_image }}"
          class="w-100"
        />
      </div>
      {% endif %} {% if preprocessed_image is not none %}
      <h5 class="fw-semibold h5 mt-4">
        Detected and Recognized License Plate Character
      </h5>
      <div class="my-2 w-100">
        <img
          id="extracted-plate-characters"
          src="data:image/jpeg;base64,{{ preprocessed_image }}"
          class="w-100"
        />
      </div>
      {% endif %} {% if classified_text is not none %}
      <h5 class="fw-semibold h5 mt-4">Extracted and Classified Character</h5>
      <div class="my-2 w-100">
        <h1 class="text-center mt-2 font-bold">{{ classified_text }}</h1>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %} {% block js %}
<script>
  console.log($("#extracted-plate-characters").attr("src"));
  function readImage(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        var width = $("#license-plate").attr("src", e.target.result).width();
        $("#license-plate")
          .attr("src", e.target.result)
          .height(parseInt(width / 3));
      };

      reader.readAsDataURL(input.files[0]);
    }
  }
</script>
{% endblock %}
